<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RRHH IA - Velvz Dashboard</title>

    <!-- Favicons -->
    <link rel="icon" href="/favicon.ico" sizes="48x48">
    <link rel="icon" href="/logoR.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/logoR.png">

    <!-- Estilos base del dashboard -->
    <link rel="stylesheet" href="/assets/css/app-dashboard.css">

    <!-- Estilos específicos de RRHH -->
    <link rel="stylesheet" href="/assets/css/rrhh.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- HEADER -->
    <header class="velvz-header">
        <div class="velvz-header__container">
            <!-- BRAND -->
            <div class="velvz-header__island velvz-header__island--brand">
                <a href="/app/" class="velvz-header__logo">
                    <div class="velvz-header__logo-shape">
                        <div class="velvz-header__logo-face">
                            <div class="velvz-header__logo-eye"></div>
                            <div class="velvz-header__logo-mouth"></div>
                            <div class="velvz-header__logo-eye"></div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- SERVICE SELECTOR - Simple y funcional -->
            <div class="velvz-header__island velvz-header__island--services" style="margin-right: 0;">
                <div style="position: relative;">
                    <button type="button" id="svcBtn" style="
                        display: flex;
                        align-items: center;
                        gap: 0.5rem;
                        padding: 0.5rem 1rem;
                        background: transparent;
                        border: none;
                        color: var(--dark-text);
                        font-family: inherit;
                        font-size: 0.9rem;
                        font-weight: 500;
                        cursor: pointer;
                        border-radius: 12px;
                    ">
                        <i class="fas fa-users" style="color: #10b981;"></i>
                        <span>RRHH</span>
                        <i class="fas fa-chevron-down" style="font-size: 0.7rem; opacity: 0.6;"></i>
                    </button>
                    <div id="svcDropdown" style="
                        position: absolute;
                        top: calc(100% + 8px);
                        left: 0;
                        min-width: 200px;
                        background: #1a1a2e;
                        border: 1px solid rgba(255,255,255,0.1);
                        border-radius: 12px;
                        padding: 0.5rem;
                        display: none;
                        z-index: 9999;
                        box-shadow: 0 10px 40px rgba(0,0,0,0.5);
                    ">
                        <a href="/app/" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #a5a5c9; text-decoration: none; border-radius: 8px;">
                            <i class="fas fa-th-large"></i>
                            <span>Hub Central</span>
                        </a>
                        <a href="/app/chatbots/" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #a5a5c9; text-decoration: none; border-radius: 8px;">
                            <i class="fas fa-robot"></i>
                            <span>Chatbots IA</span>
                        </a>
                        <a href="/app/rrhh/" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #10b981; text-decoration: none; border-radius: 8px; background: rgba(16,185,129,0.15);">
                            <i class="fas fa-users"></i>
                            <span>RRHH IA</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- BÚSQUEDA -->
            <div class="velvz-header__island velvz-header__island--search">
                <div class="velvz-header__search">
                    <input
                        type="text"
                        class="velvz-header__search-input"
                        placeholder="Buscar procesos, candidatos..."
                        id="headerSearchInput"
                    >
                    <i class="fas fa-search velvz-header__search-icon"></i>
                </div>
            </div>

            <!-- PERFIL -->
            <div class="velvz-header__island velvz-header__island--cta">
                <div class="velvz-header__avatar" id="userAvatar">
                    <div class="velvz-header__avatar-circle">
                        <span id="userInitials">-</span>
                    </div>
                </div>
            </div>

            <!-- TOGGLE MÓVIL -->
            <div class="velvz-header__mobile-toggle" id="mobileMenuToggle">
                <div class="velvz-header__hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>

        <!-- MENÚ MÓVIL -->
        <div class="velvz-header__mobile-backdrop"></div>
        <div class="velvz-header__mobile-menu" id="mobileMenu">
            <button class="velvz-header__mobile-close"></button>

            <div class="velvz-header__mobile-content">
                <div class="velvz-header__mobile-search">
                    <div class="velvz-header__mobile-search-container">
                        <i class="fas fa-search velvz-header__mobile-search-icon"></i>
                        <input type="text" class="velvz-header__mobile-search-input" placeholder="Buscar..." id="mobileSearchInput">
                    </div>
                </div>

                <div class="velvz-header__mobile-section">
                    <h3 class="velvz-header__mobile-section-title">RRHH IA</h3>
                    <a href="/app/rrhh/" class="velvz-header__mobile-link velvz-header__mobile-link--active">
                        <i class="velvz-header__mobile-link-icon fas fa-briefcase"></i>
                        <span>Procesos</span>
                    </a>
                    <a href="/app/rrhh/candidates/" class="velvz-header__mobile-link">
                        <i class="velvz-header__mobile-link-icon fas fa-user-tie"></i>
                        <span>Candidatos</span>
                    </a>
                    <a href="/app/rrhh/forms/" class="velvz-header__mobile-link">
                        <i class="velvz-header__mobile-link-icon fas fa-file-alt"></i>
                        <span>Formularios</span>
                    </a>
                </div>

                <div class="velvz-header__mobile-section">
                    <h3 class="velvz-header__mobile-section-title">Cuenta</h3>
                    <a href="/app/profile/" class="velvz-header__mobile-link">
                        <i class="velvz-header__mobile-link-icon fas fa-user"></i>
                        <span>Mi Perfil</span>
                    </a>
                    <a href="#" class="velvz-header__mobile-link" id="mobileLogout">
                        <i class="velvz-header__mobile-link-icon fas fa-sign-out-alt"></i>
                        <span>Cerrar Sesión</span>
                    </a>
                </div>
            </div>

            <div class="velvz-header__mobile-user-card">
                <div class="velvz-header__mobile-user-avatar" id="mobileUserAvatar">
                    <span id="mobileUserInitials">-</span>
                </div>
                <div class="velvz-header__mobile-user-info">
                    <div class="velvz-header__mobile-user-name" id="mobileUserName">Usuario</div>
                    <div class="velvz-header__mobile-user-email" id="mobileUserEmail">usuario@email.com</div>
                </div>
            </div>
        </div>
    </header>

    <!-- LAYOUT PRINCIPAL -->
    <div class="velvz-app">
        <!-- SIDEBAR -->
        <aside class="velvz-sidebar">
            <div class="velvz-sidebar__section">
                <h3 class="velvz-sidebar__title">RRHH IA</h3>
                <ul class="velvz-sidebar__menu">
                    <li class="velvz-sidebar__item">
                        <a href="/app/rrhh/" class="velvz-sidebar__link velvz-sidebar__link--active">
                            <i class="velvz-sidebar__icon fas fa-briefcase"></i>
                            <span>Procesos</span>
                        </a>
                    </li>
                    <li class="velvz-sidebar__item">
                        <a href="/app/rrhh/candidates/" class="velvz-sidebar__link">
                            <i class="velvz-sidebar__icon fas fa-user-tie"></i>
                            <span>Candidatos</span>
                        </a>
                    </li>
                    <li class="velvz-sidebar__item">
                        <a href="/app/rrhh/forms/" class="velvz-sidebar__link">
                            <i class="velvz-sidebar__icon fas fa-file-alt"></i>
                            <span>Formularios</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="velvz-sidebar__section">
                <h3 class="velvz-sidebar__title">Análisis</h3>
                <ul class="velvz-sidebar__menu">
                    <li class="velvz-sidebar__item">
                        <a href="/app/rrhh/analytics/" class="velvz-sidebar__link">
                            <i class="velvz-sidebar__icon fas fa-chart-bar"></i>
                            <span>Estadísticas</span>
                        </a>
                    </li>
                    <li class="velvz-sidebar__item">
                        <a href="/app/rrhh/reports/" class="velvz-sidebar__link">
                            <i class="velvz-sidebar__icon fas fa-file-export"></i>
                            <span>Informes</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="velvz-sidebar__section">
                <h3 class="velvz-sidebar__title">Cuenta</h3>
                <ul class="velvz-sidebar__menu">
                    <li class="velvz-sidebar__item">
                        <a href="/app/profile/" class="velvz-sidebar__link">
                            <i class="velvz-sidebar__icon fas fa-user"></i>
                            <span>Mi Perfil</span>
                        </a>
                    </li>
                    <li class="velvz-sidebar__item">
                        <a href="#" class="velvz-sidebar__link" id="logoutLink">
                            <i class="velvz-sidebar__icon fas fa-sign-out-alt"></i>
                            <span>Cerrar Sesión</span>
                        </a>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- CONTENIDO PRINCIPAL -->
        <main class="velvz-main">
            <div class="velvz-rrhh-page">
                <!-- BREADCRUMBS -->
                <nav class="velvz-breadcrumbs">
                    <a href="/app/" class="velvz-breadcrumbs__link">Hub</a>
                    <span class="velvz-breadcrumbs__separator">
                        <i class="fas fa-chevron-right"></i>
                    </span>
                    <a href="/app/rrhh/" class="velvz-breadcrumbs__link">RRHH IA</a>
                    <span class="velvz-breadcrumbs__separator">
                        <i class="fas fa-chevron-right"></i>
                    </span>
                    <span class="velvz-breadcrumbs__current">Procesos de Selección</span>
                </nav>

                <!-- HERO HEADER -->
                <div class="velvz-rrhh-hero">
                    <div class="velvz-rrhh-hero__content">
                        <div class="velvz-rrhh-hero__text">
                            <h1 class="velvz-rrhh-hero__title">
                                <span class="velvz-rrhh-hero__icon">
                                    <i class="fas fa-users"></i>
                                </span>
                                Procesos de Selección
                            </h1>
                            <p class="velvz-rrhh-hero__subtitle">
                                Automatiza el filtrado de candidatos con IA y encuentra el talento ideal
                            </p>
                        </div>
                        <button class="velvz-rrhh-hero__cta" id="createProcessBtn">
                            <i class="fas fa-plus"></i>
                            <span>Nuevo Proceso</span>
                        </button>
                    </div>

                    <!-- ESTADÍSTICAS RÁPIDAS -->
                    <div class="velvz-rrhh-stats">
                        <div class="velvz-rrhh-stat">
                            <div class="velvz-rrhh-stat__icon velvz-rrhh-stat__icon--primary">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <div class="velvz-rrhh-stat__content">
                                <span class="velvz-rrhh-stat__value" id="statTotalProcesses">0</span>
                                <span class="velvz-rrhh-stat__label">Procesos Activos</span>
                            </div>
                        </div>
                        <div class="velvz-rrhh-stat">
                            <div class="velvz-rrhh-stat__icon velvz-rrhh-stat__icon--success">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="velvz-rrhh-stat__content">
                                <span class="velvz-rrhh-stat__value" id="statTotalCandidates">0</span>
                                <span class="velvz-rrhh-stat__label">Candidatos</span>
                            </div>
                        </div>
                        <div class="velvz-rrhh-stat">
                            <div class="velvz-rrhh-stat__icon velvz-rrhh-stat__icon--info">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="velvz-rrhh-stat__content">
                                <span class="velvz-rrhh-stat__value" id="statShortlisted">0</span>
                                <span class="velvz-rrhh-stat__label">Preseleccionados</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- BARRA DE HERRAMIENTAS -->
                <div class="velvz-rrhh-toolbar">
                    <div class="velvz-rrhh-toolbar__left">
                        <div class="velvz-rrhh-search">
                            <i class="fas fa-search"></i>
                            <input
                                type="text"
                                placeholder="Buscar procesos..."
                                id="processSearch"
                                class="velvz-rrhh-search__input"
                            >
                        </div>
                    </div>

                    <div class="velvz-rrhh-toolbar__right">
                        <div class="velvz-rrhh-filters">
                            <button class="velvz-filter-pill velvz-filter-pill--active" data-filter="all">
                                <span>Todos</span>
                                <span class="velvz-filter-pill__count" id="allCount">0</span>
                            </button>
                            <button class="velvz-filter-pill" data-filter="active">
                                <span class="velvz-filter-pill__dot velvz-filter-pill__dot--active"></span>
                                <span>Activos</span>
                                <span class="velvz-filter-pill__count" id="activeCount">0</span>
                            </button>
                            <button class="velvz-filter-pill" data-filter="closed">
                                <span class="velvz-filter-pill__dot velvz-filter-pill__dot--inactive"></span>
                                <span>Cerrados</span>
                                <span class="velvz-filter-pill__count" id="closedCount">0</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- CONTENEDOR DE PROCESOS -->
                <div class="velvz-rrhh-container">
                    <!-- Loading state -->
                    <div class="velvz-rrhh-loading" id="processesLoading" style="display: none;">
                        <div class="velvz-rrhh-loading__spinner"></div>
                        <p class="velvz-rrhh-loading__text">Cargando procesos...</p>
                    </div>

                    <!-- Estado vacío -->
                    <div class="velvz-rrhh-empty" id="emptyProcesses">
                        <div class="velvz-rrhh-empty__illustration">
                            <div class="velvz-rrhh-empty__icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="velvz-rrhh-empty__particles">
                                <span></span><span></span><span></span>
                            </div>
                        </div>
                        <h3 class="velvz-rrhh-empty__title">Crea tu primer proceso de selección</h3>
                        <p class="velvz-rrhh-empty__description">
                            Define el puesto, sube CVs y deja que la IA filtre los mejores candidatos para ti
                        </p>
                        <button class="velvz-rrhh-empty__cta" id="createFirstProcessBtn">
                            <i class="fas fa-plus"></i>
                            <span>Crear mi primer proceso</span>
                        </button>
                    </div>

                    <!-- Grid de procesos -->
                    <div class="velvz-rrhh-grid" id="processesGrid" style="display: none;">
                        <!-- Los procesos se cargan dinámicamente -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- FOOTER -->
    <footer class="velvz-footer">
        <div class="velvz-footer__container">
            <div class="velvz-footer__brand">
                <a href="/" class="velvz-footer__logo-link">
                    <div class="velvz-footer__logo">
                        <div class="velvz-footer__logo-shape">
                            <div class="velvz-footer__logo-face">
                                <div class="velvz-footer__logo-eye velvz-footer__logo-eye--left"></div>
                                <div class="velvz-footer__logo-mouth"></div>
                                <div class="velvz-footer__logo-eye velvz-footer__logo-eye--right"></div>
                            </div>
                        </div>
                    </div>
                    <span class="velvz-footer__brand-name">Velvz</span>
                </a>
                <p class="velvz-footer__tagline">IA conversacional para empresas</p>
            </div>

            <nav class="velvz-footer__links">
                <a href="/" class="velvz-footer__link">Inicio</a>
                <a href="/servicios/" class="velvz-footer__link">Servicios</a>
                <a href="/precios/" class="velvz-footer__link">Precios</a>
                <a href="/documentacion/" class="velvz-footer__link">Documentación</a>
                <a href="/contacto/" class="velvz-footer__link">Contacto</a>
            </nav>

            <div class="velvz-footer__legal">
                <div class="velvz-footer__copyright">© 2025 Velvz SL</div>
                <div>
                    <a href="/privacidad/" class="velvz-footer__link">Privacidad</a> ·
                    <a href="/terminos/" class="velvz-footer__link">Términos</a> ·
                    <a href="/cookies/" class="velvz-footer__link">Cookies</a>
                </div>
            </div>
        </div>

        <div class="velvz-footer__ambient">
            <div class="velvz-footer__pulse"></div>
            <div class="velvz-footer__pulse"></div>
        </div>
    </footer>

    <!-- MODAL CREAR PROCESO -->
    <div class="velvz-modal" id="createProcessModal">
        <div class="velvz-modal__backdrop"></div>
        <div class="velvz-modal__content velvz-modal__content--large">
            <div class="velvz-modal__header">
                <div class="velvz-modal__header-icon velvz-modal__header-icon--rrhh">
                    <i class="fas fa-briefcase"></i>
                </div>
                <div class="velvz-modal__header-text">
                    <h2 class="velvz-modal__title">Nuevo Proceso de Selección</h2>
                    <p class="velvz-modal__subtitle">Define el puesto y los requisitos para filtrar candidatos</p>
                </div>
                <button class="velvz-modal__close" id="closeCreateModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="velvz-modal__body">
                <form id="createProcessForm">
                    <!-- Paso 1: Información básica -->
                    <div class="velvz-form-section">
                        <h3 class="velvz-form-section__title">
                            <span class="velvz-form-section__number">1</span>
                            Información del Puesto
                        </h3>

                        <div class="velvz-form-group">
                            <label class="velvz-form-label" for="processName">
                                <i class="fas fa-briefcase"></i>
                                Nombre del puesto
                            </label>
                            <input
                                type="text"
                                id="processName"
                                class="velvz-form-input"
                                placeholder="Ej: Desarrollador Full Stack Senior"
                                required
                                maxlength="100"
                            >
                        </div>

                        <div class="velvz-form-row">
                            <div class="velvz-form-group">
                                <label class="velvz-form-label" for="processDepartment">
                                    <i class="fas fa-building"></i>
                                    Departamento
                                </label>
                                <select id="processDepartment" class="velvz-form-input">
                                    <option value="">Seleccionar...</option>
                                    <option value="tech">Tecnología</option>
                                    <option value="marketing">Marketing</option>
                                    <option value="sales">Ventas</option>
                                    <option value="hr">Recursos Humanos</option>
                                    <option value="finance">Finanzas</option>
                                    <option value="operations">Operaciones</option>
                                    <option value="other">Otro</option>
                                </select>
                            </div>
                            <div class="velvz-form-group">
                                <label class="velvz-form-label" for="processLocation">
                                    <i class="fas fa-map-marker-alt"></i>
                                    Ubicación
                                </label>
                                <input
                                    type="text"
                                    id="processLocation"
                                    class="velvz-form-input"
                                    placeholder="Ej: Madrid, Remoto"
                                >
                            </div>
                        </div>

                        <div class="velvz-form-group">
                            <label class="velvz-form-label" for="processDescription">
                                <i class="fas fa-align-left"></i>
                                Descripción del puesto
                            </label>
                            <textarea
                                id="processDescription"
                                class="velvz-form-input velvz-form-textarea"
                                placeholder="Describe las responsabilidades y funciones principales del puesto..."
                                rows="4"
                            ></textarea>
                        </div>
                    </div>

                    <!-- Paso 2: Requisitos -->
                    <div class="velvz-form-section">
                        <h3 class="velvz-form-section__title">
                            <span class="velvz-form-section__number">2</span>
                            Requisitos del Candidato
                        </h3>

                        <div class="velvz-form-group">
                            <label class="velvz-form-label" for="processRequirements">
                                <i class="fas fa-list-check"></i>
                                Requisitos obligatorios
                            </label>
                            <textarea
                                id="processRequirements"
                                class="velvz-form-input velvz-form-textarea"
                                placeholder="Lista los requisitos indispensables (uno por línea):
- 5+ años de experiencia en desarrollo web
- Dominio de React y Node.js
- Inglés avanzado"
                                rows="4"
                            ></textarea>
                            <span class="velvz-form-hint">La IA usará estos criterios para filtrar candidatos</span>
                        </div>

                        <div class="velvz-form-group">
                            <label class="velvz-form-label" for="processNiceToHave">
                                <i class="fas fa-star"></i>
                                Requisitos deseables <span class="velvz-form-optional">(opcional)</span>
                            </label>
                            <textarea
                                id="processNiceToHave"
                                class="velvz-form-input velvz-form-textarea"
                                placeholder="Requisitos que suman puntos pero no son obligatorios..."
                                rows="3"
                            ></textarea>
                        </div>

                        <div class="velvz-form-row">
                            <div class="velvz-form-group">
                                <label class="velvz-form-label" for="processExperience">
                                    <i class="fas fa-clock"></i>
                                    Experiencia mínima
                                </label>
                                <select id="processExperience" class="velvz-form-input">
                                    <option value="0">Sin experiencia</option>
                                    <option value="1">1+ año</option>
                                    <option value="2">2+ años</option>
                                    <option value="3">3+ años</option>
                                    <option value="5" selected>5+ años</option>
                                    <option value="10">10+ años</option>
                                </select>
                            </div>
                            <div class="velvz-form-group">
                                <label class="velvz-form-label" for="processSalary">
                                    <i class="fas fa-euro-sign"></i>
                                    Rango salarial <span class="velvz-form-optional">(opcional)</span>
                                </label>
                                <input
                                    type="text"
                                    id="processSalary"
                                    class="velvz-form-input"
                                    placeholder="Ej: 45.000€ - 60.000€"
                                >
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="velvz-modal__footer">
                <button type="button" class="velvz-btn velvz-btn--ghost" id="cancelCreateModal">
                    Cancelar
                </button>
                <button type="submit" form="createProcessForm" class="velvz-btn velvz-btn--rrhh" id="submitCreateProcess">
                    <i class="fas fa-rocket"></i>
                    <span>Crear Proceso</span>
                </button>
            </div>
        </div>
    </div>

    <!-- INDICADOR DE CARGA GLOBAL -->
    <div class="velvz-loading-overlay" id="globalLoadingOverlay">
        <div class="velvz-loading-overlay__content">
            <div class="velvz-loading-overlay__spinner"></div>
            <div class="velvz-loading-overlay__text" id="loadingText">
                Creando proceso...
            </div>
            <div class="velvz-loading-overlay__subtitle" id="loadingSubtitle">
                Esto puede tardar unos segundos
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/assets/js/auth-config.js"></script>
    <script src="/assets/js/app-dashboard.js"></script>
    <script src="/assets/js/notifications.js"></script>
    <script src="/assets/js/rrhh.js"></script>

    <!-- Selector de servicios - SIMPLE -->
    <script>
    (function() {
        var btn = document.getElementById('svcBtn');
        var dropdown = document.getElementById('svcDropdown');
        var isOpen = false;

        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            isOpen = !isOpen;
            dropdown.style.display = isOpen ? 'block' : 'none';
        });

        document.addEventListener('click', function() {
            if (isOpen) {
                isOpen = false;
                dropdown.style.display = 'none';
            }
        });
    })();
    </script>
</body>
</html>
